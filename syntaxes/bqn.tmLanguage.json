{
  "comment": "Reference to the Oniguruma Regex library:\n  https://github.com/kkos/oniguruma/blob/master/doc/RE\n\n* The reference version for this TextMate grammar is the YAML version here:\n  https://github.com/tikkanz/j-vscode/blob/master/syntaxes/j.tmLanguage.yaml\n  Convert to other formats (JSON, PLIST) using utils (e.g. TextMate Languages extension for VS Code)\n* Some in comments throughout the grammar\n",
  "name": "BQN",
  "scopeName": "source.bqn",
  "fileTypes": ["bqn"],
  "patterns": [
    {
      "include": "#bracket"
    },
    {
      "include": "#number"
    },
    {
      "include": "#name"
    },
    {
      "include": "#operator"
    },
    {
      "include": "#variable"
    },
    {
      "include": "#string"
    },
    {
      "include": "#comment"
    },
    {
      "include": "#entity"
    },
    {
      "include": "#subject"
    }
  ],
  "repository": {
    "bracket": {
      "patterns": [
        {
          "name": "meta.bracket.bqn",
          "match": "(\\(|\\))"
        }
      ]
    },
    "number": {
      "patterns": [
        {
          "name": "constant.numeric.bqn",
          "match": "(?<![A-Z_a-z0-9œÄ‚àû¬Ø])¬Ø?(¬Ø_*)?((\\d[\\d_]*(\\.\\d[\\d_]*)?|œÄ_*)([eE]_*(¬Ø_*)?\\d[\\d_]*)?|‚àû_*)(i_*(¬Ø_*)?((\\d[\\d_]*(\\.\\d[\\d_]*)?|œÄ_*)([eE]_*(¬Ø_*)?\\d[\\d_]*)?|‚àû_*))?"
        }
      ]
    },
    "entity": {
      "patterns": [
        {
          "comment": "BQN 1-modifier (glyph)",
          "name": "keyword.operator.modifier1.bqn",
          "match": "[ÀôÀúÀò¬®¬¥Àù`‚åú‚Åº]|(_ùï£)"
        },
        {
          "comment": "BQN 1-modifier",
          "name": "keyword.operator.modifier1.bqn",
          "match": "((?<=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b|‚Ä¢)_[A-Z√Ä-√ñ√ò-√ûa-z√ü-√∂√∏-√ø]([_A-Z√Ä-√ñ√ò-√ûa-z√ü-√∂√∏-√ø¬ØœÄ‚àû0-9]*[A-Z√Ä-√ñ√ò-√ûa-z√ü-√∂√∏-√ø¬ØœÄ‚àû0-9])?((?=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b)"
        }
      ]
    },
    "operator": {
      "patterns": [
        {
          "comment": "BQN 2-modifier (glyph)",
          "name": "keyword.control.modifier2.bqn",
          "match": "[‚àò‚óã‚ä∏‚üú‚åæ‚äò‚ó∂‚éä‚éâ‚öá‚çü]|(_ùï£_)"
        },
        {
          "comment": "BQN 2-modifier",
          "name": "keyword.control.modifier2.bqn",
          "match": "((?<=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b|‚Ä¢)_[A-Z√Ä-√ñ√ò-√ûa-z√ü-√∂√∏-√ø][_A-Z√Ä-√ñ√ò-√ûa-z√ü-√∂√∏-√ø¬ØœÄ‚àû0-9]*_((?=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b)"
        }
      ]
    },
    "subject": {
      "patterns": [
        {
          "comment": "BQN subject (glyph)",
          "name": "support.class.bqn",
          "match": "[ùïóùïòùï®ùï©ùï§]"
        },
        {
          "comment": "BQN subject",
          "name": "support.class.bqn",
          "match": "((?<=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b|‚Ä¢)[a-z√ü-√∂√∏-√ø][A-Z√Ä-√ñ√ò-√ûa-z√ü-√∂√∏-√ø_0-9œÄ‚àû¬Ø]*((?=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b)"
        }
      ]
    },
    "variable": {
      "patterns": [
        {
          "comment": "BQN function (glyph)",
          "name": "variable.language.function.bqn",
          "match": "[ùîΩùîæùïéùïèùïä+\\-√ó√∑‚ãÜ‚àö‚åä‚åà|¬¨‚àß‚à®<>‚â†=‚â§‚â•‚â°‚â¢‚ä£‚ä¢‚•ä‚àæ‚âç‚ãà‚Üë‚Üì‚Üï¬´¬ª‚åΩ‚çâ/‚çã‚çí‚äè‚äë‚äê‚äí‚àä‚ç∑‚äî!‚çï‚çé]"
        },
        {
          "comment": "BQN function",
          "name": "variable.language.function.bqn",
          "match": "((?<=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b|‚Ä¢)[A-Z√Ä-√ñ√ò-√û][A-Z√Ä-√ñ√ò-√ûa-z√ü-√∂√∏-√ø_0-9œÄ‚àû¬Ø]*((?=[ùïóùîΩùïòùîæùï®ùïéùï©ùïèùï§ùïäùï£‚Äø])|\\b)"
        }
      ]
    },

    "string": {
      "patterns": [
        {
          "comment": "character literal",
          "name": "string.quoted.double.bqn",
          "match": "(').(')",
          "captures": {
            "0": {
              "name": "punctuation.definition.string.begin.bqn"
            },
            "1": {
              "name": "punctuation.definition.string.end.bqn"
            }
          }
        },
        {
          "comment": "character literal (newline)",
          "name": "string.quoted.double.bqn",
          "begin": "(')$",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.string.begin.bqn"
            }
          },
          "end": "^(')",
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.string.end.bqn"
            }
          }
        },
        {
          "comment": "double quote string",
          "name": "string.quoted.double.bqn",
          "begin": "\"",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.string.begin.bqn"
            }
          },
          "end": "\"",
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.string.end.bqn"
            }
          }
        }
      ]
    },
    
    "comment": {
      "patterns": [
        {
          "name": "comment.line.number-sign.bqn",
          "begin": "#",
          "end": "$",
          "captures": {
            "0": {
              "name": "punctuation.definition.comment.bqn"
            }
          }
        }
      ]
    }
  }
}
